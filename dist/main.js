(()=>{"use strict";(e=>{const t=document.getElementById("timer-hours"),r=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),n=e=>e<10?"0"+e:e,a=setInterval((()=>{let e=(()=>{let e=(new Date("06 september 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),r=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minuts:r,seconds:t}})();t.textContent=n(e.hours),r.textContent=n(e.minuts),o.textContent=n(e.seconds),e.timeRemaining<=0&&(clearInterval(a),t.textContent="00",t.style.color="red",r.textContent="00",r.style.color="red",o.textContent="00",o.style.color="red")}),1e3)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{let r=t.target;if(r.closest(".menu"))e.classList.toggle("active-menu");else{if(r.closest("menu")&&!r.closest("a"))return;e.classList.remove("active-menu")}}))})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{if(e.style.display="block",e.style.opasiti="0",innerWidth>768){let t,r=0;const o=()=>{t=requestAnimationFrame(o),r+=5,r<=100?e.style.opacity=""+r/100:(cancelAnimationFrame(t),r=0)};t=requestAnimationFrame(o)}}))})),e.addEventListener("click",(t=>{let r=t.target;r.classList.contains("popup-close")?e.style.display="none":(r=r.closest(".popup-content"),r||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("main");let r;const o=e=>{if(e.target.hasAttribute("href"))e.preventDefault(),r=e.target.getAttribute("href");else{if(!e.target.parentNode.hasAttribute("href"))return;e.preventDefault(),r=e.target.parentNode.getAttribute("href")}const t=document.querySelector(r);t&&window.scrollTo({top:t.offsetTop,behavior:"smooth"})};e.addEventListener("click",o),t.addEventListener("click",o)})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,n)=>{e===o&&(e=>{for(let o=0;o<r.length;o++)e===o?(t[o].classList.add("active"),r[o].classList.remove("d-none")):(t[o].classList.remove("active"),r[o].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),r=document.querySelector(".portfolio-dots");let o,n=0;e.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("dot"),0===t&&o.classList.add("dot-active"),r.appendChild(o)}));const a=document.querySelectorAll(".dot"),l=(e,t,r)=>{e[t].classList.remove(r)},s=(e,t,r)=>{e[t].classList.add(r)},c=()=>{l(e,n,"portfolio-item-active"),l(a,n,"dot-active"),n++,n>=e.length&&(n=0),s(e,n,"portfolio-item-active"),s(a,n,"dot-active")},i=(e=3e3)=>{o=setInterval(c,e)};t.addEventListener("click",(t=>{t.preventDefault();let r=t.target;r.matches(".portfolio-btn, .dot")&&(l(e,n,"portfolio-item-active"),l(a,n,"dot-active"),r.matches("#arrow-right")?n++:r.matches("#arrow-left")?n--:r.matches(".dot")&&a.forEach(((e,t)=>{e===r&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),s(e,n,"portfolio-item-active"),s(a,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(3e3)})(),(()=>{const e=document.querySelector(".command");let t;e.addEventListener("mouseover",(e=>{e.target.classList.contains("command__photo")&&(t=e.target.src,e.target.src=e.target.dataset.img)})),e.addEventListener("mouseout",(e=>{e.target.classList.contains("command__photo")&&(e.target.src=t)}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),l=document.getElementById("total");t.addEventListener("change",(e=>{let t=e.target;t.hasAttribute("min")&&(t.value=t.value.replace(/\D/g,""))})),t.addEventListener("change",(t=>{const s=t.target;(s.matches("select")||s.matches("input"))&&(()=>{let t=0,s=1,c=1;const i=r.options[r.selectedIndex].value,d=+o.value;i||(o.value="",n.value="",a.value="",l.textContent=0),n.value>1&&(s+=(n.value-1)/10),a.value&&a.value<5?c*=2:a.value&&a.value<10&&(c*=1.5),i&&d&&(t=e*i*d*s*c);let u=0;if(0!==t){let e=setInterval((()=>{u<=t?l.textContent=Math.floor(u):u>t&&clearInterval(e),u+=t/20}),50)}})()}))})(100),document.querySelectorAll("form").forEach((e=>{(e=>{const t=document.createElement("style");t.textContent="\n      .sk-rotating-plane {\n        width: 2em;\n        height: 2em;\n        margin: auto;\n        background-color: #337ab7;\n        animation: sk-rotating-plane 1.2s infinite ease-in-out;\n      }\n\n      @keyframes sk-rotating-plane {\n        0% {\n          transform: perspective(120px) rotateX(0deg) rotateY(0deg);\n        }\n        50% {\n          transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg);\n        }\n        100% {\n          transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg);\n        }\n    }",document.head.appendChild(t);const r=document.createElement("style");r.textContent="\n      .error {\n        border: 2px solid red !important;\n      }\n      .validator-error {\n        display: inline-block;\n        border: 1px solid red;\n        border-radius: 5px;\n        font-size: 12px;\n        font-family: sans-serif;\n        color: red;\n        padding: 0 5px;\n      }\n    ",document.head.appendChild(r);const o=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem;",o.addEventListener("submit",(e=>{if((e=>{let t=Array.from(e.elements);const r=document.querySelectorAll(".validator-error");Array.from(r).forEach((e=>e.remove())),t.forEach((e=>e.classList.remove("error")))})(o),e.preventDefault(),(e=>{let t=Array.from(e.elements),r=!1;const o=e=>{const t=document.createElement("lable");t.textContent="неверный формат ввода",t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t);let r=getComputedStyle(e);r.transform&&(t.style.transform=r.transform)};return t.forEach((t=>{t.id===`${e.id}-name`&&(t.value=t.value.replace(/[^А-Яа-яЁё -]/g,""),t.value=t.value.trim(),t.value=t.value.replace(/^(\-+)|(\-+)$/g,"").replace(/ +/g," ").replace(/\-+/g,"-").trim(),t.value=t.value.toLowerCase().replace(/^.|\s./g,(e=>e.toUpperCase())),t.value.length<3&&(t.value=""),t.value||(t.classList.add("error"),o(t),r=!0)),t.id===`${e.id}-email`&&(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t.value)||(t.classList.add("error"),o(t),r=!0)),t.id===`${e.id}-phone`&&(/^\+?7 ?\(\d{3}\) ?\d{3}-\d{2}-\d{2}$/.test(t.value)||(t.classList.add("error"),o(t),r=!0)),t.id===`${e.id}-message`&&(t.value=t.value.replace(/[^А-Яа-я \d,\.\?!-;:]+/g,""),t.value=t.value.trim(),t.value=t.value.replace(/^(\-+)|(\-+)$/g,"").replace(/ +/g," ").replace(/\-+/g,"-").trim(),t.value.length<3&&(t.value=""),t.value||(t.classList.add("error"),o(t),r=!0))})),r})(o))return;n.textContent="",n.classList.add("sk-rotating-plane"),o.appendChild(n);const t=new FormData(o);let r={};t.forEach(((e,t)=>{r[t]=e})),(async()=>{try{(e=>{if(200!==e.status)throw new Error("status network not 200.");n.classList.remove("sk-rotating-plane"),n.textContent="Спасибо! Мы скоро с вами свяжемся!";const t=document.querySelector(".popup");setTimeout((()=>{t.style.display="none",n.remove()}),2e3)})(await a(r)),(()=>{for(let e=0;e<o.length-1;e++)o[e].value=""})()}catch(t){e=t,n.classList.remove("sk-rotating-plane"),n.textContent="Что-то пошло не так...",console.error(e)}var e})()}));const a=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)})})(e.id)}))})();