(()=>{"use strict";(e=>{const t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),r=()=>{let e=(new Date("06 september 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minuts:n,seconds:t}},a=e=>e<10?"0"+e:e;let s=r();t.textContent=a(s.hours),n.textContent=a(s.minuts),o.textContent=a(s.seconds);const l=setInterval((()=>{s=r(),t.textContent=a(s.hours),n.textContent=a(s.minuts),o.textContent=a(s.seconds),s.timeRemaining<=0&&(clearInterval(l),t.textContent="00",t.style.color="red",n.textContent="00",n.style.color="red",o.textContent="00",o.style.color="red")}),1e3)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{let n=t.target;if(n.closest(".menu"))e.classList.toggle("active-menu");else{if(n.closest("menu")&&!n.closest("a"))return;e.classList.remove("active-menu")}}))})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{if(e.style.display="block",e.style.opasiti="0",innerWidth>768){let t,n=0;const o=()=>{t=requestAnimationFrame(o),n+=5,n<=100?e.style.opacity=""+n/100:(cancelAnimationFrame(t),n=0)};t=requestAnimationFrame(o)}}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("main");let n;const o=e=>{if(e.target.hasAttribute("href"))e.preventDefault(),n=e.target.getAttribute("href");else{if(!e.target.parentNode.hasAttribute("href"))return;e.preventDefault(),n=e.target.parentNode.getAttribute("href")}const t=document.querySelector(n);t&&window.scrollTo({top:t.offsetTop,behavior:"smooth"})};e.addEventListener("click",o),t.addEventListener("click",o)})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=document.querySelector(".portfolio-dots");let o,r=0;e.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("dot"),0===t&&o.classList.add("dot-active"),n.appendChild(o)}));const a=document.querySelectorAll(".dot"),s=(e,t,n)=>{e[t].classList.remove(n)},l=(e,t,n)=>{e[t].classList.add(n)},c=()=>{s(e,r,"portfolio-item-active"),s(a,r,"dot-active"),r++,r>=e.length&&(r=0),l(e,r,"portfolio-item-active"),l(a,r,"dot-active")},i=(e=3e3)=>{o=setInterval(c,e)};t.addEventListener("click",(t=>{t.preventDefault();let n=t.target;n.matches(".portfolio-btn, .dot")&&(s(e,r,"portfolio-item-active"),s(a,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&a.forEach(((e,t)=>{e===n&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),l(e,r,"portfolio-item-active"),l(a,r,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(3e3)})(),(()=>{const e=document.querySelector(".command");let t;e.addEventListener("mouseover",(e=>{e.target.classList.contains("command__photo")&&(t=e.target.src,e.target.src=e.target.dataset.img)})),e.addEventListener("mouseout",(e=>{e.target.classList.contains("command__photo")&&(e.target.src=t)}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),s=document.getElementById("total");t.addEventListener("change",(e=>{let t=e.target;t.hasAttribute("min")&&(t.value=t.value.replace(/\D/g,""))})),t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t=0,l=1,c=1;const i=n.options[n.selectedIndex].value,d=+o.value;i&&o.value||(o.value="",r.value="",a.value="",s.textContent=0),r.value>1&&(l+=(r.value-1)/10),a.value&&a.value<5?c*=2:a.value&&a.value<10&&(c*=1.5),i&&d&&(t=e*i*d*l*c);let m=0;if(0!==t){let e=setInterval((()=>{m<=t?s.textContent=Math.floor(m):m>t&&clearInterval(e),m+=t/20}),50)}})()}))})(100),document.querySelectorAll("form").forEach((e=>{(e=>{const t=document.createElement("style");t.textContent="\n      .sk-rotating-plane {\n        width: 2em;\n        height: 2em;\n        margin: auto;\n        background-color: #337ab7;\n        animation: sk-rotating-plane 1.2s infinite ease-in-out;\n      }\n\n      @keyframes sk-rotating-plane {\n        0% {\n          transform: perspective(120px) rotateX(0deg) rotateY(0deg);\n        }\n        50% {\n          transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg);\n        }\n        100% {\n          transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg);\n        }\n    }",document.head.appendChild(t);const n=document.createElement("style");n.textContent="\n      .error {\n        border: 2px solid red !important;\n      }\n      .validator-error {\n        display: inline-block;\n        border: 1px solid red;\n        border-radius: 5px;\n        font-size: 12px;\n        font-family: sans-serif;\n        color: red;\n        padding: 0 5px;\n      }\n    ",document.head.appendChild(n);const o=document.getElementById(e),r=document.createElement("div");r.style.cssText="font-size: 2rem;",o.addEventListener("submit",(e=>{if((e=>{let t=Array.from(e.elements);const n=document.querySelectorAll(".validator-error");Array.from(n).forEach((e=>e.remove())),t.forEach((e=>e.classList.remove("error")))})(o),e.preventDefault(),(e=>{let t=Array.from(e.elements),n=!1;const o=t=>{const n=document.createElement("lable");t.id===`${e.id}-name`&&(n.textContent="Введите имя"),t.id===`${e.id}-email`&&(n.textContent="email не существует"),t.id===`${e.id}-phone`&&(n.textContent="Ввидите номер телефона"),t.id===`${e.id}-message`&&(n.textContent="Ввидите сообщение на русском языке"),n.classList.add("validator-error"),t.insertAdjacentElement("afterend",n);let o=getComputedStyle(t);o.transform&&(n.style.transform=o.transform)};return t.forEach((t=>{t.id===`${e.id}-name`&&(t.value.length<2&&(t.value=""),t.value||(t.classList.add("error"),o(t),n=!0)),t.id===`${e.id}-email`&&(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t.value)||(t.classList.add("error"),o(t),n=!0)),t.id===`${e.id}-phone`&&(/^\+?7 ?\(\d{3}\) ?\d{3}-\d{2}-\d{2}$/.test(t.value)||(t.classList.add("error"),o(t),n=!0)),t.id===`${e.id}-message`&&(t.value.length<3&&(t.value=""),t.value||(t.classList.add("error"),o(t),n=!0))})),n})(o))return;r.textContent="",r.classList.add("sk-rotating-plane"),o.appendChild(r);const t=new FormData(o);let n={};t.forEach(((e,t)=>{n[t]=e})),(async()=>{try{(e=>{if(200!==e.status)throw new Error("status network not 200.");r.classList.remove("sk-rotating-plane"),r.textContent="Спасибо! Мы скоро с вами свяжемся!";const t=document.querySelector(".popup");setTimeout((()=>{t.style.display="none",r.remove()}),2e3)})(await a(n)),(()=>{for(let e=0;e<o.length-1;e++)o[e].value=""})()}catch(t){e=t,r.classList.remove("sk-rotating-plane"),r.textContent="Что-то пошло не так...",console.error(e)}var e})()}));const a=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)})})(e.id)})),document.querySelectorAll("form").forEach((e=>{e.addEventListener("change",(e=>{let t=e.target;t.value=t.value.trim(),t.value=t.value.replace(/^(\-+)|(\-+)$/g,"").replace(/ +/g," ").replace(/\-+/g,"-").trim(),"user_name"===t.name&&(t.value=t.value.replace(/[^А-Яа-яЁё -]/g,""),t.value=t.value.toLowerCase().replace(/^.|\s./g,(e=>e.toUpperCase()))),"user_email"===t.name&&(t.value=t.value.replace(/[^A-Za-z0-9-@_\.!~*']/g,"").trim()),"user_message"===t.name&&(t.value=t.value.replace(/[^А-Яа-я \d,\.\?!-;:]+/g,"").trim())}))}))})();